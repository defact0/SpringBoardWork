<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>스프링 게시판 목록!</title>

<%--  http://cusmaker.tistory.com/122
	   참고 writeBox를 만들기 위해서~ --%>

<script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script>

function articleView(idx){
	 $('.articleView_layer').addClass('open');
	  $.ajax({ type:'post',
		   url:'contents',
		   data: ({bnum:idx}),
		   success:function(data){
			 $('#view_layer').html(data);
		   }
	});
}
</script>
	<style type="text/css">
	/*table,td,th {	border: 1px solid green;}*/
	th {	background-color: green;	color: white;}
	html,body {	height: 100%;	margin: 0}
	.articleView_Layer {
		display: none;
		position: fixed;
		_position: absolute;
		top: 0;
		left: 0;
		z-index: 10000;
		width: 100%;
		height: 100%
	}
	.articleView_Layer.open {	display: block}
	
	.articleView_Layer.bg_Layer {
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		background: #000;
		opacity: .5;
		filter: alpha(opacity = 50)
	}
	
	#view_layer {
		position: absolute;
		top: 40%;
		left: 40%;
		width: 400px;
		height: 400px;
		margin: -150px 0 0 -194px;
		padding: 28px 28px 0 28px;
		border: 2px solid #555;
		background: #fff;
		font-size: 12px;
		font-family: Tahoma, Geneva, sans-serif;
		color: #767676;
		line-height: normal;
		white-space: normal
	}
	</style>
</head>

<body>
	<table>
	<!-- 
		세션 정보는 members테이블이 아닌 minfo라는 뷰에서 얻어옵니다.
	 -->
		<tr>
			<td colspan=2 align="center">Session Info</td>
		</tr>
		<tr>
			<td>id</td>
			<td>${members.id }</td>
		</tr>
		<tr>
			<td>name</td>
			<td>${members.mname }</td>
		</tr>
		<tr>
			<td>grade</td>
			<td>${members.gname }</td>
		</tr>
		<tr>
			<td>point</td>
			<td>${members.point }</td>
		</tr>
	</table>
	<table id="two_table">
		<tr bgcolor="cyan" align="center" height="35">
			<td width="100">번호</td>
			<td width="400">제목</td>
			<td width="150">작성자</td>
			<td width="200">작성일</td>
			<td width="100">조회수</td>
		</tr>
		<c:forEach var="blist" items="${blist}">
		<tr height="25">
			<td width="100" align="center">${blist.bnum }</td>
			<td width="400"><a href="view_layer" onclick="articleView('${blist.bnum }')">${blist.btitle }</a></td>
			<td width="150" align="center"> ${blist.mname }</td>
			<td width="200" align="center">${blist.bdate }</td>
			<td width="100" align="center">${blist.bviews }</td>
		</tr>
		</c:forEach>
	</table>
	<center>${paging }<p></center>
</body>
</html>

<div class="articleView_layer">
	<div class="bg_layer"></div>
	<div id="view_layer"></div>
</div>
